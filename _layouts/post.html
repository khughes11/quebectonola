---
layout: default
---
<article class="post">
  <header>
    <h1>{{ page.title }}</h1>
    <div class="post-meta">
      <span class="post-type">{{ page.collection | capitalize }}</span>
      {% if page.date %}
        <span class="date">{{ page.date | date: "%B %d, %Y" }}</span>
      {% endif %}
      {% if page.tags %}
        <span class="tags">
          {% for tag in page.tags %}
            <span class="tag">{{ tag }}</span>
          {% endfor %}
        </span>
      {% endif %}
    </div>
    
    {% if page.sections %}
      <div class="related-sections">
        <strong>Related Sections:</strong>
        {% for section in page.sections %}
          <a href="/sections/{{ section }}/">{{ section | capitalize }}</a>
          {% unless forloop.last %} • {% endunless %}
        {% endfor %}
      </div>
    {% endif %}
  </header>
  
  <div class="post-content">
    {{ content }}
  </div>
  
  {% if page.references %}
    <div class="references">
      <h2>References</h2>
      <ul>
        {% for ref in page.references %}
          <li>{{ ref }}</li>
        {% endfor %}
      </ul>
    </div>
  {% endif %}
  
  {% if page.related_events %}
    <div class="related-events">
      <h2>Related Historical Events</h2>
      {% for event_id in page.related_events %}
        {% assign event = site.historical | where: "slug", event_id | first %}
        {% if event %}
          <div class="event-summary">
            <h3><a href="{{ event.url }}">{{ event.title }}</a></h3>
            <p>{{ event.description | default: event.excerpt }}</p>
          </div>
        {% endif %}
      {% endfor %}
    </div>
  {% endif %}
  
  <nav class="post-navigation">
    {% assign collection_posts = site[page.collection] | sort: "date" %}
    {% for post in collection_posts %}
      {% if post.title == page.title %}
        {% assign prev_index = forloop.index0 | minus: 1 %}
        {% assign next_index = forloop.index0 | plus: 1 %}
        
        {% if prev_index >= 0 %}
          {% assign prev_post = collection_posts[prev_index] %}
          <a href="{{ prev_post.url }}" class="prev-post">← {{ prev_post.title }}</a>
        {% endif %}
        
        {% if next_index < collection_posts.size %}
          {% assign next_post = collection_posts[next_index] %}
          <a href="{{ next_post.url }}" class="next-post">{{ next_post.title }} →</a>
        {% endif %}
        {% break %}
      {% endif %}
    {% endfor %}
  </nav>
</article>
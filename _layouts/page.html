---
layout: default
---

<div class="container">
  <article class="prose prose-lg max-w-none">
    <header class="mb-8">
      <h1>{{ page.title }}</h1>
      {% if page.subtitle %}
        <p class="hero__subtitle">{{ page.subtitle }}</p>
      {% endif %}
      
      <!-- Section Jump Navigation -->
      {% if page.layout == 'page' and page.slug %}
        <nav class="section-jump-nav">
          <a href="#map" class="jump-nav-btn">Map</a>
          <a href="#overview" class="jump-nav-btn">Overview</a>
          <a href="#posts" class="jump-nav-btn">Posts</a>
        </nav>
      {% endif %}
    </header>
    
    <!-- Map Section -->
    {% if page.layout == 'page' and page.slug %}
      <section id="map" class="section-map">
        {% if page.map %}
          <div class="map-embed">{{ page.map }}</div>
        {% else %}
          <div class="map-placeholder">
            <p>Map of {{ page.title }} would be displayed here</p>
          </div>
        {% endif %}
      </section>
    {% endif %}
    
    <!-- Overview Section -->
    <section id="overview" class="section-overview">
      {{ content }}
    </section>
    
    <!-- Posts Section -->
    {% if page.layout == 'page' and page.slug %}
      <section id="posts" class="section-posts">
        <h2>Posts By Theme</h2>
        
        <!-- Modern Exploration Posts -->
        {% assign modern_posts = site.modern | where_exp: "item", "item.sections contains page.slug" %}
        {% if modern_posts.size > 0 %}
          <div class="card">
            <div class="card__header">
              <h3 class="card__title">Modern Exploration</h3>
            </div>
            <div class="card__content">
              {% for post in modern_posts %}
                <div class="activity-item">
                  <h4><a href="{{ post.url | relative_url }}">{{ post.title }}</a></h4>
                  <div class="activity-meta">
                    {% if post.date %}
                      <span class="tag">{{ post.date | date: "%B %d, %Y" }}</span>
                    {% endif %}
                    <span class="tag tag--tertiary">{{ post.collection | capitalize }}</span>
                    {% if post.sections %}
                      {% for section in post.sections %}
                        <span class="tag tag--primary">{{ section | capitalize }}</span>
                      {% endfor %}
                    {% endif %}
                    {% if post.tags %}
                      {% for tag in post.tags %}
                        <span class="tag tag--secondary">{{ tag | capitalize }}</span>
                      {% endfor %}
                    {% endif %}
                  </div>
                  {% if post.description %}
                    <p class="text-tertiary">{{ post.description }}</p>
                  {% elsif post.excerpt %}
                    <p class="text-tertiary">{{ post.excerpt | strip_html | truncate: 200 }}</p>
                  {% endif %}
                </div>
              {% endfor %}
            </div>
          </div>
        {% endif %}

        <!-- Historical Posts -->
        {% assign historical_posts = site.historical | where_exp: "item", "item.sections contains page.slug" %}
        {% if historical_posts.size > 0 %}
          <div class="card">
            <div class="card__header">
              <h3 class="card__title">Historical Documentation</h3>
            </div>
            <div class="card__content">
              {% for post in historical_posts %}
                <div class="activity-item">
                  <h4><a href="{{ post.url | relative_url }}">{{ post.title }}</a></h4>
                  <div class="activity-meta">
                    {% if post.date %}
                      <span class="tag">{{ post.date | date: "%B %d, %Y" }}</span>
                    {% endif %}
                    <span class="tag tag--tertiary">{{ post.collection | capitalize }}</span>
                    {% if post.sections %}
                      {% for section in post.sections %}
                        <span class="tag tag--primary">{{ section | capitalize }}</span>
                      {% endfor %}
                    {% endif %}
                    {% if post.tags %}
                      {% for tag in post.tags %}
                        <span class="tag tag--secondary">{{ tag | capitalize }}</span>
                      {% endfor %}
                    {% endif %}
                  </div>
                  {% if post.description %}
                    <p class="text-tertiary">{{ post.description }}</p>
                  {% elsif post.excerpt %}
                    <p class="text-tertiary">{{ post.excerpt | strip_html | truncate: 200 }}</p>
                  {% endif %}
                </div>
              {% endfor %}
            </div>
          </div>
        {% endif %}

        <!-- Photos -->
        {% assign photo_posts = site.photos | where_exp: "item", "item.sections contains page.slug" %}
        <div class="card">
          <div class="card__header">
            <h3 class="card__title">Photo Gallery</h3>
            <p class="card__subtitle">Visual documentation of the trail</p>
          </div>
          <div class="card__content">
            {% if photo_posts.size > 0 %}
              {% for post in photo_posts %}
                <div class="activity-item">
                  <h4><a href="{{ post.url | relative_url }}">{{ post.title }}</a></h4>
                  <div class="activity-meta">
                    {% if post.date %}
                      <span class="tag">{{ post.date | date: "%B %d, %Y" }}</span>
                    {% endif %}
                    <span class="tag tag--tertiary">{{ post.collection | capitalize }}</span>
                    {% if post.sections %}
                      {% for section in post.sections %}
                        <span class="tag tag--primary">{{ section | capitalize }}</span>
                      {% endfor %}
                    {% endif %}
                    {% if post.tags %}
                      {% for tag in post.tags %}
                        <span class="tag tag--secondary">{{ tag | capitalize }}</span>
                      {% endfor %}
                    {% endif %}
                  </div>
                  {% if post.description %}
                    <p class="text-tertiary">{{ post.description }}</p>
                  {% elsif post.excerpt %}
                    <p class="text-tertiary">{{ post.excerpt | strip_html | truncate: 200 }}</p>
                  {% endif %}
                </div>
              {% endfor %}
            {% else %}
              <p class="text-tertiary">No photo galleries yet. Help us build this visual archive!</p>
            {% endif %}
          </div>
        </div>

        <!-- References -->
        {% assign reference_posts = site.references | where_exp: "item", "item.sections contains page.slug" %}
        <div class="card">
          <div class="card__header">
            <h3 class="card__title">References</h3>
            <p class="card__subtitle">Research sources and documentation</p>
          </div>
          <div class="card__content">
            {% if reference_posts.size > 0 %}
              {% for post in reference_posts %}
                <div class="activity-item">
                  <h4><a href="{{ post.url | relative_url }}">{{ post.title }}</a></h4>
                  <div class="activity-meta">
                    {% if post.date %}
                      <span class="tag">{{ post.date | date: "%B %d, %Y" }}</span>
                    {% endif %}
                    <span class="tag tag--tertiary">{{ post.collection | capitalize }}</span>
                    {% if post.sections %}
                      {% for section in post.sections %}
                        <span class="tag tag--primary">{{ section | capitalize }}</span>
                      {% endfor %}
                    {% endif %}
                    {% if post.tags %}
                      {% for tag in post.tags %}
                        <span class="tag tag--secondary">{{ tag | capitalize }}</span>
                      {% endfor %}
                    {% endif %}
                  </div>
                  {% if post.description %}
                    <p class="text-tertiary">{{ post.description }}</p>
                  {% elsif post.excerpt %}
                    <p class="text-tertiary">{{ post.excerpt | strip_html | truncate: 200 }}</p>
                  {% endif %}
                </div>
              {% endfor %}
            {% else %}
              <p class="text-tertiary">No reference materials yet. Help us build this research archive!</p>
            {% endif %}
          </div>
        </div>

      </section>
    {% endif %}
    
    <!-- Sources & Citations -->
    {% if page.sources or page.citations %}
      <div class="data-sources">
        <h3 class="data-sources__title">Sources & Citations</h3>
        <ul class="data-sources__list">
          {% if page.sources %}
            {% for source in page.sources %}
              <li class="data-sources__item">{{ source }}</li>
            {% endfor %}
          {% endif %}
          {% if page.citations %}
            {% for citation in page.citations %}
              <li class="data-sources__item">{{ citation }}</li>
            {% endfor %}
          {% endif %}
        </ul>
      </div>
    {% endif %}
  </article>
</div>